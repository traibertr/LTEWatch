<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LTEWatch: hal::MotorDriverHal Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LTEWatch<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Master Thesis - LTE-M/NB-IoT &amp; GNSS - Smart-Watch Application</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>hal</b></li><li class="navelem"><a class="el" href="classhal_1_1_motor_driver_hal.html">MotorDriverHal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classhal_1_1_motor_driver_hal-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">hal::MotorDriverHal Class Reference<div class="ingroups"><a class="el" href="group___low_h_a_l.html">LowHAL</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Class of Hardware Abstraction Layer to handle the RTC 2 needed by the motorDriver.  
 <a href="classhal_1_1_motor_driver_hal.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="motordriverhal_8h_source.html">motordriverhal.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7a9e54942bd44395f48fbb012490b777"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#a7a9e54942bd44395f48fbb012490b777">initialize</a> ()</td></tr>
<tr class="memdesc:a7a9e54942bd44395f48fbb012490b777"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the components needed by this class.  <a href="classhal_1_1_motor_driver_hal.html#a7a9e54942bd44395f48fbb012490b777">More...</a><br /></td></tr>
<tr class="separator:a7a9e54942bd44395f48fbb012490b777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac683513d885cde642eb8e9d8589d8d30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#ac683513d885cde642eb8e9d8589d8d30">clearMotorPulse</a> ()</td></tr>
<tr class="memdesc:ac683513d885cde642eb8e9d8589d8d30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the GPIOs used to do a motor's step.  <a href="classhal_1_1_motor_driver_hal.html#ac683513d885cde642eb8e9d8589d8d30">More...</a><br /></td></tr>
<tr class="separator:ac683513d885cde642eb8e9d8589d8d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfcbf41bc6fb476afd36f73f5366bcd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#abfcbf41bc6fb476afd36f73f5366bcd6">setMotorPulse</a> (uint64_t pulse)</td></tr>
<tr class="memdesc:abfcbf41bc6fb476afd36f73f5366bcd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the pulse on the GPIOs used to drive the motor's coils.  <a href="classhal_1_1_motor_driver_hal.html#abfcbf41bc6fb476afd36f73f5366bcd6">More...</a><br /></td></tr>
<tr class="separator:abfcbf41bc6fb476afd36f73f5366bcd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab95c60b029cb66c914e4c4d621b846fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#ab95c60b029cb66c914e4c4d621b846fc">setPulseTick</a> (uint32_t pulseLen)</td></tr>
<tr class="memdesc:ab95c60b029cb66c914e4c4d621b846fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the triggers for the timer according to the steppermotor's specs.  <a href="classhal_1_1_motor_driver_hal.html#ab95c60b029cb66c914e4c4d621b846fc">More...</a><br /></td></tr>
<tr class="separator:ab95c60b029cb66c914e4c4d621b846fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2500f35bee5240777333ba6253cc22a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#a2500f35bee5240777333ba6253cc22a6">setGapTick</a> (uint32_t gapTick)</td></tr>
<tr class="memdesc:a2500f35bee5240777333ba6253cc22a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the GPIO's mask to be used to clear the pulse at the end motor's step.  <a href="classhal_1_1_motor_driver_hal.html#a2500f35bee5240777333ba6253cc22a6">More...</a><br /></td></tr>
<tr class="separator:a2500f35bee5240777333ba6253cc22a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a416893063aad58027f9dd7238cbc08a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#a416893063aad58027f9dd7238cbc08a2">setGpioMask</a> (uint8_t *motorCoils, size_t size)</td></tr>
<tr class="memdesc:a416893063aad58027f9dd7238cbc08a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the GPIO's mask to be used to clear the pulse at the end motor's step.  <a href="classhal_1_1_motor_driver_hal.html#a416893063aad58027f9dd7238cbc08a2">More...</a><br /></td></tr>
<tr class="separator:a416893063aad58027f9dd7238cbc08a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a60c961cd416a9f04ad9ef738d436e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#a78a60c961cd416a9f04ad9ef738d436e">setGpioOutputs</a> (uint8_t *motorCoils, size_t size)</td></tr>
<tr class="memdesc:a78a60c961cd416a9f04ad9ef738d436e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the GPIOs as outputs (for motor in series)  <a href="classhal_1_1_motor_driver_hal.html#a78a60c961cd416a9f04ad9ef738d436e">More...</a><br /></td></tr>
<tr class="separator:a78a60c961cd416a9f04ad9ef738d436e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d9b65624d9397fa94124b5775f8741"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#a25d9b65624d9397fa94124b5775f8741">startTimerPulse</a> ()</td></tr>
<tr class="memdesc:a25d9b65624d9397fa94124b5775f8741"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the timer dedicated to skip the motors for a pulse's delay.  <a href="classhal_1_1_motor_driver_hal.html#a25d9b65624d9397fa94124b5775f8741">More...</a><br /></td></tr>
<tr class="separator:a25d9b65624d9397fa94124b5775f8741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a126f26e9697ddc7daf9908dff605ee89"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#a126f26e9697ddc7daf9908dff605ee89">startTimerNoPulse</a> ()</td></tr>
<tr class="memdesc:a126f26e9697ddc7daf9908dff605ee89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the timer dedicated to skip the motors for a pulse's delay.  <a href="classhal_1_1_motor_driver_hal.html#a126f26e9697ddc7daf9908dff605ee89">More...</a><br /></td></tr>
<tr class="separator:a126f26e9697ddc7daf9908dff605ee89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa926d4613c2fbb7576cdbb9f31b6051b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#aa926d4613c2fbb7576cdbb9f31b6051b">enableGapPulse</a> ()</td></tr>
<tr class="memdesc:aa926d4613c2fbb7576cdbb9f31b6051b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the interrupt of the Gap Delay.  <a href="classhal_1_1_motor_driver_hal.html#aa926d4613c2fbb7576cdbb9f31b6051b">More...</a><br /></td></tr>
<tr class="separator:aa926d4613c2fbb7576cdbb9f31b6051b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a703163add243e9c9e1bb72d29e2e4782"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#a703163add243e9c9e1bb72d29e2e4782">disableGapPulse</a> ()</td></tr>
<tr class="memdesc:a703163add243e9c9e1bb72d29e2e4782"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the interrupt of the Gap Delay.  <a href="classhal_1_1_motor_driver_hal.html#a703163add243e9c9e1bb72d29e2e4782">More...</a><br /></td></tr>
<tr class="separator:a703163add243e9c9e1bb72d29e2e4782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121e40be85cc337a2e3af32e5e083505"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#a121e40be85cc337a2e3af32e5e083505">stopTimer</a> ()</td></tr>
<tr class="memdesc:a121e40be85cc337a2e3af32e5e083505"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the RTC timer/counter used fot the motor's driver.  <a href="classhal_1_1_motor_driver_hal.html#a121e40be85cc337a2e3af32e5e083505">More...</a><br /></td></tr>
<tr class="separator:a121e40be85cc337a2e3af32e5e083505"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a34115cf97723c055ab301be3124ca26f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_motor_driver_hal.html#a34115cf97723c055ab301be3124ca26f">motorTimerHandler</a> (struct k_timer *timer_id)</td></tr>
<tr class="memdesc:a34115cf97723c055ab301be3124ca26f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Motor's RTC Timer event handler. (Callback Function)  <a href="classhal_1_1_motor_driver_hal.html#a34115cf97723c055ab301be3124ca26f">More...</a><br /></td></tr>
<tr class="separator:a34115cf97723c055ab301be3124ca26f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Class of Hardware Abstraction Layer to handle the RTC 2 needed by the motorDriver. </p>
<p >This class handles the RTC events and toggle the needed GPIOs to apply some pulse on the motor's coils, based on Nordic SDK v15.0.0 and later...</p>
<p >Initial author: Patrice Rudaz Creation date: 2016-06-16</p>
<dl class="section author"><dt>Author</dt><dd>Tristan Traiber (<a href="#" onclick="location.href='mai'+'lto:'+'tri'+'st'+'an.'+'tr'+'aib'+'er'+'@ma'+'st'+'er.'+'he'+'s-s'+'o.'+'ch'; return false;">trist<span class="obfuscator">.nosp@m.</span>an.t<span class="obfuscator">.nosp@m.</span>raibe<span class="obfuscator">.nosp@m.</span>r@ma<span class="obfuscator">.nosp@m.</span>ster.<span class="obfuscator">.nosp@m.</span>hes-<span class="obfuscator">.nosp@m.</span>so.ch</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>December 2022 </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac683513d885cde642eb8e9d8589d8d30" name="ac683513d885cde642eb8e9d8589d8d30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac683513d885cde642eb8e9d8589d8d30">&#9670;&#160;</a></span>clearMotorPulse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hal::MotorDriverHal::clearMotorPulse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear the GPIOs used to do a motor's step. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">outCoils</td><td><a class="el" href="class_the.html" title="Our PicoEvent processing machine.">The</a> GPIOs to clear. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a703163add243e9c9e1bb72d29e2e4782" name="a703163add243e9c9e1bb72d29e2e4782"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a703163add243e9c9e1bb72d29e2e4782">&#9670;&#160;</a></span>disableGapPulse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MotorDriverHal::disableGapPulse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the interrupt of the Gap Delay. </p>

</div>
</div>
<a id="aa926d4613c2fbb7576cdbb9f31b6051b" name="aa926d4613c2fbb7576cdbb9f31b6051b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa926d4613c2fbb7576cdbb9f31b6051b">&#9670;&#160;</a></span>enableGapPulse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MotorDriverHal::enableGapPulse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the interrupt of the Gap Delay. </p>

</div>
</div>
<a id="a7a9e54942bd44395f48fbb012490b777" name="a7a9e54942bd44395f48fbb012490b777"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a9e54942bd44395f48fbb012490b777">&#9670;&#160;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hal::MotorDriverHal::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the components needed by this class. </p>
<p >This method initializes the timers (hardware) used to drive the stepper motors.</p>
<dl class="section warning"><dt>Warning</dt><dd>Must be called before any other method of this class </dd></dl>

</div>
</div>
<a id="a2500f35bee5240777333ba6253cc22a6" name="a2500f35bee5240777333ba6253cc22a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2500f35bee5240777333ba6253cc22a6">&#9670;&#160;</a></span>setGapTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MotorDriverHal::setGapTick </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>gapTick</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up the GPIO's mask to be used to clear the pulse at the end motor's step. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorCoils</td><td>All GPIOs used by the motors. </td></tr>
    <tr><td class="paramname">size</td><td>Amount of GPIOS used by all motors. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a416893063aad58027f9dd7238cbc08a2" name="a416893063aad58027f9dd7238cbc08a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a416893063aad58027f9dd7238cbc08a2">&#9670;&#160;</a></span>setGpioMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MotorDriverHal::setGpioMask </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>motorCoils</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up the GPIO's mask to be used to clear the pulse at the end motor's step. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorCoils</td><td>All GPIOs used by the motors. </td></tr>
    <tr><td class="paramname">size</td><td>Amount of GPIOS used by all motors. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a78a60c961cd416a9f04ad9ef738d436e" name="a78a60c961cd416a9f04ad9ef738d436e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a60c961cd416a9f04ad9ef738d436e">&#9670;&#160;</a></span>setGpioOutputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MotorDriverHal::setGpioOutputs </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>motorCoils</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up the GPIOs as outputs (for motor in series) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorCoils</td><td>All GPIOs used by the motors. </td></tr>
    <tr><td class="paramname">size</td><td>Amount of GPIOS used by all motors. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abfcbf41bc6fb476afd36f73f5366bcd6" name="abfcbf41bc6fb476afd36f73f5366bcd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfcbf41bc6fb476afd36f73f5366bcd6">&#9670;&#160;</a></span>setMotorPulse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hal::MotorDriverHal::setMotorPulse </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>pulse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies the pulse on the GPIOs used to drive the motor's coils. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pulse</td><td><a class="el" href="class_the.html" title="Our PicoEvent processing machine.">The</a> specific pulse to be applied on the GPIOs. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab95c60b029cb66c914e4c4d621b846fc" name="ab95c60b029cb66c914e4c4d621b846fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab95c60b029cb66c914e4c4d621b846fc">&#9670;&#160;</a></span>setPulseTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MotorDriverHal::setPulseTick </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pulseLen</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the triggers for the timer according to the steppermotor's specs. </p>
<p >This method takes care of the stepper-motor's specifications to calculate the trigger to be used with the rtc for the duration of the pulse to be applied to make on1 step.</p>
<p ><a class="el" href="class_the.html" title="Our PicoEvent processing machine.">The</a> precision of the trigger depends on the clock used for it. This clock is defined by <code>RTC2_CONFIG_FREQUENCY</code> (32768 here). <a class="el" href="class_the.html" title="Our PicoEvent processing machine.">The</a> trigger is obtained by the following equation:</p>
<p class="formulaDsp">
<picture><source srcset="form_0_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\[
     trigger = \frac{RTC2\_CONFIG\_FREQUENCY}{1000} * (\frac{duration}{1000});
\]" src="form_0.png"/></picture>
</p>
<p >As trigger is an integer value, we should always ceil this result at the next integer. After this first step, we check that the delay obtained is compatible with the motor's specifications. As long as the delay is below the pulse specification, it's incremented.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pulseLen</td><td><a class="el" href="class_the.html" title="Our PicoEvent processing machine.">The</a> duration of the pulse to be applied on the steppermotor's coil in [us] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a126f26e9697ddc7daf9908dff605ee89" name="a126f26e9697ddc7daf9908dff605ee89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a126f26e9697ddc7daf9908dff605ee89">&#9670;&#160;</a></span>startTimerNoPulse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MotorDriverHal::startTimerNoPulse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the timer dedicated to skip the motors for a pulse's delay. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeoutTicks</td><td><a class="el" href="class_the.html" title="Our PicoEvent processing machine.">The</a> duration of the timer to be used </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a25d9b65624d9397fa94124b5775f8741" name="a25d9b65624d9397fa94124b5775f8741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25d9b65624d9397fa94124b5775f8741">&#9670;&#160;</a></span>startTimerPulse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MotorDriverHal::startTimerPulse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the timer dedicated to skip the motors for a pulse's delay. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeoutTicks</td><td><a class="el" href="class_the.html" title="Our PicoEvent processing machine.">The</a> duration of the timer to be used</td></tr>
  </table>
  </dd>
</dl>
<p>Starts the timer dedicated for the motor's pulse.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gapTicks</td><td></td></tr>
  </table>
  </dd>
</dl>
<p >Start pulse timer</p>
<p >Start gap timer (pulsen + gaplen)</p>

</div>
</div>
<a id="a121e40be85cc337a2e3af32e5e083505" name="a121e40be85cc337a2e3af32e5e083505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a121e40be85cc337a2e3af32e5e083505">&#9670;&#160;</a></span>stopTimer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MotorDriverHal::stopTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the RTC timer/counter used fot the motor's driver. </p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a34115cf97723c055ab301be3124ca26f" name="a34115cf97723c055ab301be3124ca26f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34115cf97723c055ab301be3124ca26f">&#9670;&#160;</a></span>motorTimerHandler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void motorTimerHandler </td>
          <td>(</td>
          <td class="paramtype">struct k_timer *&#160;</td>
          <td class="paramname"><em>timer_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Motor's RTC Timer event handler. (Callback Function) </p>
<p >This function will be called each time the RTC used for the motors thorw an event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intType</td><td><a class="el" href="class_the.html" title="Our PicoEvent processing machine.">The</a> event type of the used RTC. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>C:/LTEWatch/3_Software/LTEWatch_App/src/library/mcu/hal/motor/<a class="el" href="motordriverhal_8h_source.html">motordriverhal.h</a></li>
<li>C:/LTEWatch/3_Software/LTEWatch_App/src/library/mcu/hal/motor/motordriverhal.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
