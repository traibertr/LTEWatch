/****************************************************************************************************************//**
 * Copyright (C) Hes-so VALAIS/WALLIS, HEI Sion, Infotronics. 2022
 * Created by Patrice Rudaz (rut@hevs.ch)
 *
 * @file    gpioevent.h
 * @class   GpioEvent
 * @brief   Event related to any activity on gpios...
 *
 * This specialization of the XFEvent class transports information on any GPIO's activity.
 *
 * @author  Patrice Rudaz (patrice.rudaz@hevs.ch)
 * @date    November 2021
 ********************************************************************************************************************/
#pragma once

/* **************************************************************************************************************** */
/*                                                                                                                  */
/* Header files                                                                                                     */
/*                                                                                                                  */
/* **************************************************************************************************************** */
#include <eventid.h>
#include <gpio-config.h>

#include "core/xfevent.h"
#include "gpio/gpioid.h"


/* **************************************************************************************************************** */
/*                                                                                                                  */
/* Class Declaration                                                                                                */
/*                                                                                                                  */
/* **************************************************************************************************************** */
class GpioEvent : public XFEvent
{
public:
    /* ************************************************************************************************************ */
    /*                                                                                                              */
    /* CONSTRUCTOR SECTION                                                                                          */
    /*                                                                                                              */
    /* ************************************************************************************************************ */
    // --------------------------------------------------------------------------------------------------------------
    GpioEvent(gpio::GpioId::eGpioId gpioId  = gpio::GpioId::UnknownGpioId,
              EventId::eEventId     eventId = EventId::GpioEvent)
        : XFEvent(eventId, NULL, false), _gpioId(gpioId) {}

    // --------------------------------------------------------------------------------------------------------------
    virtual ~GpioEvent() {}

    /* ************************************************************************************************************ */
    /*                                                                                                              */
    /* PUBLIC DECLARATION SECTION                                                                                   */
    /*                                                                                                              */
    /* ************************************************************************************************************ */
    /************************************************************************************************************//**
     * @brief     Set the ID of the GPIO which the event is related to.
     ****************************************************************************************************************/
    inline void setGpioId(gpio::GpioId::eGpioId gpioId = gpio::GpioId::UnknownGpioId)
    {
        _gpioId = gpioId;
    }

    /************************************************************************************************************//**
     * @brief     Retrieves the Gpio Id carried by the event
     ****************************************************************************************************************/
    inline gpio::GpioId::eGpioId getGpioId()
    {
        return _gpioId;
    }

protected:
    /* ************************************************************************************************************ */
    /*                                                                                                              */
    /* PROTECTED DECLARATION SECTION                                                                                */
    /*                                                                                                              */
    /* ************************************************************************************************************ */
    // Attributes
    gpio::GpioId::eGpioId     _gpioId;
};
